{"ast":null,"code":"import io from 'socket.io-client';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n  }\n  connect(token) {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n    this.socket = io(SOCKET_URL, {\n      auth: {\n        token: token\n      }\n    });\n    this.socket.on('connect', () => {\n      console.log('Connected to server');\n    });\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from server');\n    });\n    this.socket.on('connect_error', error => {\n      console.error('Socket connection error:', error);\n    });\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  joinWishlist(wishlistId) {\n    if (this.socket) {\n      this.socket.emit('join-wishlist', wishlistId);\n    }\n  }\n  leaveWishlist(wishlistId) {\n    if (this.socket) {\n      this.socket.emit('leave-wishlist', wishlistId);\n    }\n  }\n  emitProductAdded(data) {\n    if (this.socket) {\n      this.socket.emit('product-added', data);\n    }\n  }\n  emitProductUpdated(data) {\n    if (this.socket) {\n      this.socket.emit('product-updated', data);\n    }\n  }\n  emitProductRemoved(data) {\n    if (this.socket) {\n      this.socket.emit('product-removed', data);\n    }\n  }\n  emitWishlistUpdated(data) {\n    if (this.socket) {\n      this.socket.emit('wishlist-updated', data);\n    }\n  }\n  onProductAdded(callback) {\n    if (this.socket) {\n      this.socket.on('product-added', callback);\n    }\n  }\n  onProductUpdated(callback) {\n    if (this.socket) {\n      this.socket.on('product-updated', callback);\n    }\n  }\n  onProductRemoved(callback) {\n    if (this.socket) {\n      this.socket.on('product-removed', callback);\n    }\n  }\n  onWishlistUpdated(callback) {\n    if (this.socket) {\n      this.socket.on('wishlist-updated', callback);\n    }\n  }\n  offProductAdded(callback) {\n    if (this.socket) {\n      this.socket.off('product-added', callback);\n    }\n  }\n  offProductUpdated(callback) {\n    if (this.socket) {\n      this.socket.off('product-updated', callback);\n    }\n  }\n  offProductRemoved(callback) {\n    if (this.socket) {\n      this.socket.off('product-removed', callback);\n    }\n  }\n  offWishlistUpdated(callback) {\n    if (this.socket) {\n      this.socket.off('wishlist-updated', callback);\n    }\n  }\n  isConnected() {\n    var _this$socket;\n    return ((_this$socket = this.socket) === null || _this$socket === void 0 ? void 0 : _this$socket.connected) || false;\n  }\n}\nexport default new SocketService();","map":{"version":3,"names":["io","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","SocketService","constructor","socket","connect","token","disconnect","auth","on","console","log","error","joinWishlist","wishlistId","emit","leaveWishlist","emitProductAdded","data","emitProductUpdated","emitProductRemoved","emitWishlistUpdated","onProductAdded","callback","onProductUpdated","onProductRemoved","onWishlistUpdated","offProductAdded","off","offProductUpdated","offProductRemoved","offWishlistUpdated","isConnected","_this$socket","connected"],"sources":["C:/Users/priya/OneDrive/Desktop/Shared Wishlist App/frontend/src/services/socket.ts"],"sourcesContent":["import io, { Socket } from 'socket.io-client';\r\n\r\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\r\n\r\nclass SocketService {\r\n  private socket: Socket | null = null;\r\n\r\n  connect(token: string): void {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n    }\r\n\r\n    this.socket = io(SOCKET_URL, {\r\n      auth: {\r\n        token: token,\r\n      },\r\n    });\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('Connected to server');\r\n    });\r\n\r\n    this.socket.on('disconnect', () => {\r\n      console.log('Disconnected from server');\r\n    });\r\n\r\n    this.socket.on('connect_error', (error) => {\r\n      console.error('Socket connection error:', error);\r\n    });\r\n  }\r\n\r\n  disconnect(): void {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n    }\r\n  }\r\n\r\n  joinWishlist(wishlistId: string): void {\r\n    if (this.socket) {\r\n      this.socket.emit('join-wishlist', wishlistId);\r\n    }\r\n  }\r\n\r\n  leaveWishlist(wishlistId: string): void {\r\n    if (this.socket) {\r\n      this.socket.emit('leave-wishlist', wishlistId);\r\n    }\r\n  }\r\n\r\n  emitProductAdded(data: any): void {\r\n    if (this.socket) {\r\n      this.socket.emit('product-added', data);\r\n    }\r\n  }\r\n\r\n  emitProductUpdated(data: any): void {\r\n    if (this.socket) {\r\n      this.socket.emit('product-updated', data);\r\n    }\r\n  }\r\n\r\n  emitProductRemoved(data: any): void {\r\n    if (this.socket) {\r\n      this.socket.emit('product-removed', data);\r\n    }\r\n  }\r\n\r\n  emitWishlistUpdated(data: any): void {\r\n    if (this.socket) {\r\n      this.socket.emit('wishlist-updated', data);\r\n    }\r\n  }\r\n\r\n  onProductAdded(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.on('product-added', callback);\r\n    }\r\n  }\r\n\r\n  onProductUpdated(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.on('product-updated', callback);\r\n    }\r\n  }\r\n\r\n  onProductRemoved(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.on('product-removed', callback);\r\n    }\r\n  }\r\n\r\n  onWishlistUpdated(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.on('wishlist-updated', callback);\r\n    }\r\n  }\r\n\r\n  offProductAdded(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.off('product-added', callback);\r\n    }\r\n  }\r\n\r\n  offProductUpdated(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.off('product-updated', callback);\r\n    }\r\n  }\r\n\r\n  offProductRemoved(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.off('product-removed', callback);\r\n    }\r\n  }\r\n\r\n  offWishlistUpdated(callback: (data: any) => void): void {\r\n    if (this.socket) {\r\n      this.socket.off('wishlist-updated', callback);\r\n    }\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return this.socket?.connected || false;\r\n  }\r\n}\r\n\r\nexport default new SocketService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}